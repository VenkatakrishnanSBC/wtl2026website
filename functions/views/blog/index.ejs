<%- include('../partials/head') %>
<%- include('../partials/header') %>
<% locals.pageTitle = t('blog.pageTitle'); locals.pageSubtitle = t('blog.pageSubtitle'); locals.breadcrumb = [{label: t('nav.blog')}]; %>
<%- include('../partials/page-hero') %>

<section class="section">
  <div class="container">
    <!-- Category Filter -->
    <div class="blog-filters">
      <a href="<%= locals.langPrefix %>/blog" class="blog-filter-btn <%= activeCategory === '' ? 'active' : '' %>"><%= t('blog.all') %></a>
      <% categories.forEach(function(cat) { %>
        <a href="<%= locals.langPrefix %>/blog?category=<%= encodeURIComponent(cat) %>" class="blog-filter-btn <%= activeCategory === cat ? 'active' : '' %>"><%= cat %></a>
      <% }) %>
    </div>

    <!-- Blog Grid -->
    <div class="blog-grid">
      <% posts.forEach(function(post) { %>
      <div class="blog-card">
        <div class="blog-card-img">
          <img src="/images/<%= post.image %>" alt="<%= post.title %>">
        </div>
        <div class="blog-card-body">
          <div class="blog-meta">
            <span class="blog-category"><%= post.category %></span>
            <span class="blog-date"><i class="far fa-calendar"></i> <%= post.date %></span>
            <span class="blog-read"><i class="far fa-clock"></i> <%= post.readTime %></span>
          </div>
          <h3><a href="<%= locals.langPrefix %>/blog/<%= post.slug %>"><%= post.title %></a></h3>
          <p><%= post.excerpt %></p>
          <div class="blog-card-footer">
            <span class="blog-author"><i class="far fa-user"></i> <%= post.author %></span>
            <a href="<%= locals.langPrefix %>/blog/<%= post.slug %>" class="read-more"><%= t('blog.readMore') %> <i class="fas fa-arrow-right"></i></a>
          </div>
        </div>
      </div>
      <% }) %>
    </div>

    <% if (posts.length === 0) { %>
    <div style="text-align:center;padding:60px 20px">
      <i class="fas fa-search" style="font-size:3rem;color:var(--gray-light);margin-bottom:15px"></i>
      <h3 style="color:var(--gray)"><%= t('blog.noPostsTitle') %></h3>
      <p style="color:var(--gray)"><%= t('blog.noPostsText') %> <a href="<%= locals.langPrefix %>/blog" style="color:var(--primary)"><%= t('blog.viewAllPosts') %></a>.</p>
    </div>
    <% } %>
  </div>
</section>

<!-- Newsletter CTA -->
<section class="cta-banner">
  <div class="container">
    <h2><%= t('blog.newsletterTitle') %></h2>
    <p><%= t('blog.newsletterText') %></p>
    <form class="newsletter-form" style="display:flex;gap:12px;justify-content:center;max-width:500px;margin:0 auto">
      <input type="email" placeholder="<%= t('blog.emailPlaceholder') %>" style="flex:1;padding:14px 20px;border:none;border-radius:50px;font-size:1rem">
      <button type="submit" class="btn-primary" style="white-space:nowrap"><%= t('blog.subscribe') %> <i class="fas fa-paper-plane"></i></button>
    </form>
  </div>
</section>

<%- include('../partials/footer') %>
